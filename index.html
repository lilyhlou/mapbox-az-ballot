<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title></title>
    <meta name="robots" content="noindex, nofollow" />
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <script src='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css' rel='stylesheet' />

    <style>
      #hide {
        display: none;
      }
      body {
        margin: 0;
        padding: 0;
      }
      h1 {
        margin: 10px;
        font-size: 1.5em;
        font-family: Arial, sans-serif;
      }
      .mainText {
        text-align: center;
        margin-left: 5%;
        margin-right: 5%;
        padding-top: 5%;
      }
      #secondtext{
        position: absolute;
        top: 1901px;
      }
      #thirdsection {
        position: absolute;
        top: 2860px;
      }
      #fourthsection {
        top: 3663px;
        position: absolute;
      }
      #fifthsection {
        top: 4428px;
        position: absolute;
      }
      #credits {
        top: 5325px;
        position: absolute;
        padding-bottom: 3%;
      }


      h2,
      h3 {
        margin: 10px;
        font-size: 1.2em;
      }
      h3 {
        font-size: 1em;
      }
      p {
        font-size: 0.85em;
        margin: 10px;
        text-align: left;
        font-family: Arial, sans-serif;

      }
      .map-overlay0 {
        position: absolute;
        bottom: 673px;
        right: 0;
        background: rgba(255, 255, 255, 0.8);
        margin-right: 100px;
        margin-bottom: 300px;

        font-family: Arial, sans-serif;
        overflow: auto;
        border-radius: 3px;
      }

      .map-overlay-turnout {
        position: absolute;
        bottom: -1173px;
        right: 0;
        background: rgba(255, 255, 255, 0.8);
        margin-right: 100px;
        margin-bottom: 300px;

        font-family: Arial, sans-serif;
        overflow: auto;
        border-radius: 3px;
      }


      .map-overlay {
        position: absolute;
        bottom: 40px;
        right: 0;
        top: 3473px;
        background: rgba(255, 255, 255, 0.8);
        margin-right: 100px;
        margin-bottom: 300px;

        font-family: Arial, sans-serif;
        overflow: auto;
        border-radius: 3px;
      }
      .map-overlay2 {
        position: absolute;
        bottom: -3673px;
        right: 0;
        background: rgba(255, 255, 255, 0.8);
        margin-right: 100px;
        margin-bottom: 300px;

        font-family: Arial, sans-serif;
        overflow: auto;
        border-radius: 3px;
      }
      .map-overlay3 {
        position: absolute;
        bottom: -2075px;
        right: 0;
        background: rgba(255, 255, 255, 0.8);
        margin-right: 100px;
        margin-bottom: 300px;

        font-family: Arial, sans-serif;
        overflow: auto;
        border-radius: 3px;
      }
      #polpartymap {
        position: absolute;
        top: 408px;
        bottom: 50px;
        width: 90%;
        margin-left: 5%;
        margin-right: 5%;
        height: 750px;
      }

      #map {
        position: absolute;
        top: 2920px;
        bottom: 50px;
        width: 90%;
        margin-left: 5%;
        margin-right: 5%;
        height: 750px;

      }
      #voterturnoutmap {
        position: absolute;
        top: 1199px;
        bottom: 50px;
        width: 90%;
        margin-left: 5%;
        margin-right: 5%;
        height: 750px;

      }

      #mapdeadline {
        position: relative;
        top: 3223px;
        bottom: 0px;
        width: 90%;
        margin-left: 5%;
        margin-right: 5%;
        height: 750px;
      }
      #mailinpercent {
        position: relative;
        top: 809px;
        bottom: 0px;
        width: 90%;
        margin-left: 5%;
        margin-right: 5%;
        height: 800px;
      }

      #features-turnout {
        top: 1220px;
        height: 143px;
        margin-top: 20px;
        margin-bottom: 3px;
        width: 250px;
      }

      #features0 {
        top: 437px;
        height: 143px;
        margin-top: 20px;
        margin-bottom: 3px;
        width: 250px;
      }

      #features {
        top: 2954px;
        height: 110px;
        margin-top: 20px;
        margin-bottom: 3px;
        width: 250px;
      }
      #featuresMailIn {
        top: 3743px;
        height: 130px;
        margin-top: 20px;
        margin-bottom: 3px;
        width: 250px;
      }
      #features3 {
        top: 2078px;
        height: 130px;
        margin-top: 20px;
        margin-bottom: 3px;
        width: 250px;
      }

      #legend0 {
        padding: 10px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        line-height: 18px;
        height: 32px;
        margin-bottom: -1013px;
        width: 100px;
        z-index: 7;
      }

      #legend {
        padding: 10px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        line-height: 18px;
        height: 87px;
        margin-bottom: -2050px;
        width: 100px;
      }
      #legend2 {
        padding: 10px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        line-height: 18px;
        height: 140px;
        margin-bottom: 40px;
        width: 100px;
      }
      #legend3 {
        padding: 10px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        line-height: 18px;
        height: 84px;
        margin-bottom: 40px;
        width: 100px;
      }
      #legendTurnout {
        padding: 10px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        line-height: 18px;
        height: 70px;
        margin-bottom: 40px;
        width: 100px;
      }


      .legend-key {
        display: inline-block;
        border-radius: 20%;
        width: 10px;
        height: 10px;
        margin-right: 5px;
      }
      #pd0 {
          font-size: 12px;
      }

      #pd {
          font-size: 12px;
      }
      #pd2 {
          font-size: 12px;
      }
      #pd3 {
          font-size: 12px;
      }
      #pd-turnout {
          font-size: 12px;
      }


      #ballotBoxesMap { 
        position: relative;
        top: 2550px;
        bottom: 0px;
        width: 45%;
        margin-left: 1%;
        margin-right: 2%;
        height: 750px;
        margin-left:auto; 
        right:5px;
    }
    #heatmap{
      position: relative;
        top: 1800px;
        bottom: 0px;
        width: 50%;
        margin-left: 2%;
        margin-right: 1%;
        height: 750px;
    }
      .mapboxgl-popup {
          max-width: 400px;
          font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
      }

      @media only screen and (min-width: 1350px) {
        #legend0 {
          margin-bottom:-900px;
        }
        #legendTurnout {
          margin-bottom: 129px;
        }
        #legend3 {
          margin-bottom: 100px;
        }
        #legend2 {
          margin-bottom: 75px;
        }
      }
      @media only screen and (min-width: 1550px) {
        #legend0 {
            margin-bottom: -780px;
          } 
          #legendTurnout {
              margin-bottom: 250px;
        }
        #mailinpercent {
          top: 769px;
        }
        #legend3 {
          margin-bottom: 266px;
        }
        #legend2 {
          margin-bottom: 224px;
        }
      }
      @media only screen and (min-width: 1800px) {
        #legend0 {
    margin-bottom: -645px;
}
        #legendTurnout {
              margin-bottom: 414px;
        }
        #legend3 {
          margin-bottom: 417px;
        }
        #legend2 {
          margin-bottom: 430px;
        }


      }
      @media only screen and (min-width: 1800px) {
        #legend0, #legend3, #legend2, #legend, #legendTurnout {
          margin-right: 200px;
        }
        #featuresMailIn, #features, #features3, #features-turnout {
          margin-right: 200px;
        }
        #featuresMailIn {
            top: 3833px;
        }
      } 

      @media only screen and (min-width: 2048px) {
        body {
          margin-left: 5%;
          margin-right: 5%;
        }
        #map {
          width: 80%;
        }
        #polpartymap {
          top: 441px;
          width: 80%;
        }
        #voterturnoutmap {
          width: 80%;
        }
        #mapdeadline {
          width: 80%;
        }
      }

      @media only screen and (max-width: 918px) {
        .mainText {
          margin-left: 04;
          margin-right: 0;
        }
      }

      @media only screen and (max-width: 850px) {
         #legend0 
         {
          margin-bottom: -1081px;
        }
        #legend3 { 
          margin-bottom: 25px;
        }
        #legend2 {
          margin-bottom: 0px;
        }
      }
      @media only screen and (max-width: 760px) {
        #hide {
          display: block;
        }
      }
      


    </style>
  </head>
  <body>
    <div class="mainText">
    <h1>Voting in Arizona and Navajo Nation</h1>
    <p id="hide"><i>Disclaimer: this site is best viewed on laptop monitors or larger screens. To see a static version of this site, click <a href="https://lilylouu.medium.com/voting-in-arizona-and-navajo-nation-29145aad37cf">here</a>.</i></p>
    <p></br></p>
    <p>Despite being a historically republican state (a democratic presidential candidate last won Arizona in 1996 and, prior to that, 1952), Arizona has been a battleground state for this year’s presidential election, leading to many lawsuits over counting ballots, both before and after results were called.
    </p>
    <p>
      Most of Arizona is rural, with the majority of its population living in Phoenix and Tucson. For many news outlets, the declared winner of Arizona’s electoral votes hinged on last minute mail-in ballots from Maricopa County, <a href="https://twitter.com/Nate_Cohn/status/1324174544169553922">where many of the later mail-in votes leaned towards Trump</a> (The Associated Press and Fox News had called Arizona for Biden prior to this).
    </p>
    <p>
      Arizona is also home to 21 American Indian tribes, including the Navajo, who have the largest on-reservation population in the United States, spanning 27,000 square miles between Arizona, New Mexico, and Utah, and larger than the size of West Virginia. 
    </p>
    <p>
      In August, <a href="https://www.azcentral.com/story/news/politics/arizona/2020/08/26/navajo-voters-file-suit-force-count-mail-ballots-arrive-late/5640034002/">a group of Navajo Nation citizens</a> filed <a href="http://www.fourdirectionsvote.com/wp-content/uploads/2020/08/signed-Complaint.pdf">a lawsuit</a> against Arizona, asking Arizona election officials to count ballots postmarked before Nov. 3 and delivered up to 10 days after Election Day from tribal members living on reservations.The plaintiffs cited unequal access to postal services, limited transportation, mail delays, and other hurdles to voting in violation of the Voting Rights Act. Mail can take weeks to arrive in Navajo Nation — there are only 27 postal locations in the 18,000 square miles of its Arizona portion. 
    </p>
    <p>
    However, courts ruled in favor of not extending deadlines, arguing that there was no proof that Navajo Nation was affected more than other rural areas outside of the reservation. There are 67,000 eligible Navajo voters in Arizona, and Navajo Nation has historically voted more blue than the rest of Arizona. Navajo County's population is 43% Native American, and neighboring Apache County is 73% Native American.
    </p>
    </div>
    <div id="polpartymap"></div>
    <div class="map-overlay0" id="features0">
      <h2>2016 Presidential Election by Political Party</h2>
      <div id="pd0"><p>Data from <a href="https://www.mapbox.com/elections/tilesets">Mapbox</a>.</p></div>
    </div>
    <div class="map-overlay0" id="legend0"></div>

    <!--turnout map-->
    <div id="voterturnoutmap"></div>
    <div class="map-overlay-turnout" id="features-turnout">
      <h2>2018 Voter Turnout by County</h2>
      <div id="pd-turnout"><p>Data from <a href="https://www.eac.gov/research-and-data/datasets-codebooks-and-surveys">U.S. Election Assistance Commission</a> and the US Census Buerau.</p></div>
    </div>
    <div class="map-overlay-turnout" id="legendTurnout"></div>
<!--text-->
<div id="secondtext" class="mainText">
  <p>Mail-in ballots have been the most common form of voting in Arizona, with a majority of counties getting more than 70% of their votes by mail-in 2018. Arizona allows voters to sign up for <a href="https://azsos.gov/votebymail">a program</a> that automatically sends voters a mail-in ballot for all elections they can vote in. However, vote by mail is lowest in Apache County and Navajo County, two of the three counties where Navajo Nation resides. In Navajo County, 43% of voters voted in person, with 40.7% voting in person on election day (as opposed to early voting). Similarly, in Apache County, 52.58% of voters voted in person on election day in the 2018 general elections.</p>
  <br>
</div>
<!--third map-->
    <div id="map"></div>
    <div class="map-overlay" id="features">
      <h2>Mail-In Ballot Rejection Rates</h2>
      <div id="pd"><p>Data from <a href="https://www.eac.gov/research-and-data/datasets-codebooks-and-surveys">U.S. Election Assistance Commission</a> and the US Census Buerau.</p></div>
    </div>
    <div class="map-overlay" id="legend"></div>
  <div class="mainText">
    <p id="thirdsection">In Arizona, the rejection rate for mail-in ballots ranged from 0.01% to 4%. Rates were low in 2018 for Coconino and Navajo Counties but relatively high for Apache County, which voted by mail less than other Arizona counties. 
    </p>
  </div>
  <div class="mainText">
    <p id="fourthsection"><br>While Navajo County had the lowest mail-in ballot rejection rates in the state in 2018, it had one of the largest percentages of votes be rejected due to late deadlines.    
    </p>
  </div>

    <!-- fourth map -->
    <div id="mapdeadline"></div>
    <div class="map-overlay2" id="featuresMailIn">
      <h2>Missed Deadline Mail-In Ballot Rejection Rates</h2>
      <div id="pd2"><p>Data from <a href="https://www.eac.gov/research-and-data/datasets-codebooks-and-surveys">U.S. Election Assistance Commission</a> and the US Census Buerau.</p></div>
    </div>
    <div class="map-overlay2" id="legend2"></div>
    <!-- map with mail in prevalance -->
    <div id="mailinpercent"></div>
    <div class="map-overlay3" id="features3">
      <h2>Percentage of Votes Cast Via Mail-In Ballot</h2>
      <div id="pd3"><p>Data from <a href="https://www.eac.gov/research-and-data/datasets-codebooks-and-surveys">U.S. Election Assistance Commission</a> and the US Census Buerau.</p></div>
    </div>
    <div class="map-overlay3" id="legend3"></div>
    <div class="mainText" id="fifthsection">
      <p>Though mail-in ballots can be stamped and mailed out, drop boxes have become increasingly popular for collecting mail-in votes and ensuring that votes arrive on time. However, no drop boxes were placed in Tohono Oʼodham Nation in 2020 and there were only 5 polling locations there in 2018. Most of Arizona’s voting locations, such as polling locations or drop boxes, are in areas near Tucson and Phoenix (where most of Arizona's population resides). 
      </p>
      <p>(click icons in right map for more information on locations)</p>
    </div>
    <div id="ballotBoxesMap"></div>
    <div id="heatmap"></div>
    <div class="mainText" id="credits">
      <p>Data for this project was collected using the US Census population datasets, Mapbox, and <a href='https://www.eac.gov/research-and-data/datasets-codebooks-and-surveys'>the 2018 Election Administration and Voting Survey</a> from the U.S. Election Assistance Commission. For more details on how data was collected and analyzed, click <a href="https://lilylouu.medium.com/voting-in-arizona-and-navajo-nation-for-the-mapbox-elections-challenge-9fa2a9551946">here</a>. To see a static version of this site, click <a href="https://lilylouu.medium.com/voting-in-arizona-and-navajo-nation-29145aad37cf">here</a>.</p>
    </div>
    <script>
      function titleCase(str) {
        return str.toLowerCase().split(' ').map(function(word) {
            return (word.charAt(0).toUpperCase() + word.slice(1));
        }).join(' ');
      }

      // define access token
      mapboxgl.accessToken = 'pk.eyJ1IjoibGlseWxvdSIsImEiOiJja2ZlaTR2MDIwNTM0Mnh0amFudTdraWlpIn0.1zK32PdGzTOhRtXQtRRjYQ';

      //create map
      var map = new mapboxgl.Map({
        container: 'map', // container id
        style: 'mapbox://styles/lilylou/ckfxe0ikf05tm19qwttu3sgfg' // map style URL from Mapbox Studio
      });

      // wait for map to load before adjusting it
      map.on('load', function() {
        // make a pointer cursor
        map.getCanvas().style.cursor = 'default';

        // set map bounds to the continental US
        // make a pointer cursor
        map.getCanvas().style.cursor = 'default';

        // define layer names
        var layers = [
          '0%',
          '1%',
          '2%',
          '3%',
          '4%'
        ];
        var colors = [
          '#ffffff',
          '#b6b4d5',
          '#665fc8',
          '#2920ac',
          '#080443'
        ];

        // create legend
        for (i = 0; i < layers.length; i++) {
          var layer = layers[i];
          var color = colors[i];
          var item = document.createElement('div');
          var key = document.createElement('span');
          key.className = 'legend-key';
          key.style.backgroundColor = color;

          var value = document.createElement('span');
          value.innerHTML = layer;
          item.appendChild(key);
          item.appendChild(value);
          legend.appendChild(item);
        }

        // change info window on hover
        map.on('mousemove', function(e) {
          var rejectionrate = map.queryRenderedFeatures(e.point, {
            layers: ['rejection-rate']
          });

          if (rejectionrate.length > 0) {
            document.getElementById('pd').innerHTML =
              '<h3><strong>' +
                rejectionrate[0].properties.NAME +
              ' County </strong></h3><p><b>' +
                rejectionrate[0].properties.REJECTIONRATE  +
              ' %</b> of ballots rejected </p>';
          } else {
            document.getElementById('pd').innerHTML =
            '<p>Hover over a county!</p><p>Data from <a href="https://www.eac.gov/research-and-data/datasets-codebooks-and-surveys">U.S. Election Assistance Commission</a> and the US Census Bureau.</p>';
          }
        });

        var polparty = new mapboxgl.Map({
        container: 'polpartymap', // container id
        style: 'mapbox://styles/lilylou/ckh5u180w0c7j19obw0t32dnt' // map style URL from Mapbox Studio
      });

        // make a pointer cursor
        polparty.getCanvas().style.cursor = 'default';

        // set map bounds to the continental US
        // make a pointer cursor
        polparty.getCanvas().style.cursor = 'default';

        var layers = [
          'Democratic',
          'Republican'
        ];
        var colors = [
          '#0a27ff',
          '#ff0000'
        ];


        // create legend
        for (i = 0; i < layers.length; i++) {
          var layer = layers[i];
          var color = colors[i];
          var item = document.createElement('div');
          var key = document.createElement('span');
          key.className = 'legend-key';
          key.style.backgroundColor = color;

          var value = document.createElement('span');
          value.innerHTML = layer;
          item.appendChild(key);
          item.appendChild(value);
          legend0.appendChild(item);
        }

        // change info window on hover
        polparty.on('mousemove', function(e) {
          var rejectionrate = polparty.queryRenderedFeatures(e.point, {
            layers: ['historical-pres-elections-county']
          });

          if (rejectionrate.length > 0) {
            document.getElementById('pd0').innerHTML =
              '<h3><strong>' +
                rejectionrate[0].properties.name +
              ' County</strong></h3><p><b>' +
                rejectionrate[0].properties["2016_mov_pct"] +
              ' %</b> margin of victory (' + 
              rejectionrate[0].properties["2016_mov_count"] + 
              ' more votes cast for the winning party).</p>';
          } else {
            document.getElementById('pd0').innerHTML =
            '<p>Hover over a county!</p><p>Data from <a href="https://www.mapbox.com/elections/tilesets">Mapbox</a>.</p>';
          }
        });

        var turnout = new mapboxgl.Map({
        container: 'voterturnoutmap', // container id
        style: 'mapbox://styles/lilylou/ckh9xnarb0b9619nzcvr8qgcj' // map style URL from Mapbox Studio
      });
              // make a pointer cursor
              turnout.getCanvas().style.cursor = 'default';

// set map bounds to the continental US
// make a pointer cursor
turnout.getCanvas().style.cursor = 'default';

var layers = [
  '75%',
  '80%',
  '85%',
  '90+%'
];
var colors = [
  '#9ee4ff',
  '#00b7ff',
  '#0283b6',
  '#00121a'
];

        // create legend
        for (i = 0; i < layers.length; i++) {
          var layer = layers[i];
          var color = colors[i];
          var item = document.createElement('div');
          var key = document.createElement('span');
          key.className = 'legend-key';
          key.style.backgroundColor = color;

          var value = document.createElement('span');
          value.innerHTML = layer;
          item.appendChild(key);
          item.appendChild(value);
          legendTurnout.appendChild(item);
        }

        // change info window on hover
        turnout.on('mousemove', function(e) {
          var rejectionrate = turnout.queryRenderedFeatures(e.point, {
            layers: ['turnout']
          });

          if (rejectionrate.length > 0) {
            document.getElementById('pd-turnout').innerHTML =
              '<h3><strong>' +
                rejectionrate[0].properties.NAME +
              ' County</strong></h3><p><b>' +
                rejectionrate[0].properties.VOTERTURNOUT +
              ' %</b> voter turnout</p>';
          } else {
            document.getElementById('pd-turnout').innerHTML =
            '<p>Hover over a county!</p><p>Data from <a href="https://www.mapbox.com/elections/tilesets">Mapbox</a>.</p>';
          }
        });

      var mapdeadline = new mapboxgl.Map({
       container: 'mapdeadline', // container id
       style: 'mapbox://styles/lilylou/ckgwzvnj30ju01apohh0v2guw' // map style URL from Mapbox Studio
      });
        // make a pointer cursor
        mapdeadline.getCanvas().style.cursor = 'default';

        // set map bounds to the continental US
        // make a pointer cursor
        mapdeadline.getCanvas().style.cursor = 'default';

        var layers = [
          'No Data',
          '0-.2%',
          '0.2-0.3%',
          '0.3%',
          '0.4%',
          '0.5%',
          '0.6%',
          '0.7+%'
        ];
        var colors = [
          '#e7e6d9',
          '#dbdbdb',
          '#dbdbdb',
          '#a8a8a8',
          '#716f6f',
          '#4f4f4f',
          '#1f1f1f',
          '#000000'
        ];

        // create legend
        for (i = 0; i < layers.length; i++) {
          var layer = layers[i];
          var color = colors[i];
          var item = document.createElement('div');
          var key = document.createElement('span');
          key.className = 'legend-key';
          key.style.backgroundColor = color;

          var value = document.createElement('span');
          value.innerHTML = layer;
          item.appendChild(key);
          item.appendChild(value);
          legend2.appendChild(item);
        }

        // change info window on hover
        mapdeadline.on('mousemove', function(e) {
          var rejectionrate = mapdeadline.queryRenderedFeatures(e.point, {
            layers: ['mailinballot']
          });

          if (rejectionrate.length > 0) {
              if (rejectionrate[0].properties.MISSEDDEADLINEPERCENT == "N/A"){
                    document.getElementById('pd2').innerHTML =
                  '<h3><strong>' +
                    rejectionrate[0].properties.NAME  +
                  ' County </strong></h3><p>' +
                  ' Data not avaliable </p>';
              } else {
                    document.getElementById('pd2').innerHTML =
                  '<h3><strong><b>' +
                    rejectionrate[0].properties.NAME +
                  '</b> County </strong></h3><p><b>' +
                    rejectionrate[0].properties.MISSEDDEADLINEPERCENT  +
                  '</b> % of ballots rejected<br> <b>' +
                  rejectionrate[0].properties.LATEBALLOTS +
                  '</b> Late Ballots </p>';
              } 
          } else {
              document.getElementById('pd2').innerHTML =
                '<p>Hover over a county!</p><p>Data from <a href="https://www.eac.gov/research-and-data/datasets-codebooks-and-surveys">U.S. Election Assistance Commission</a> and the US Census Bureau.</p>';
            }
        });


        var mapdeadline = new mapboxgl.Map({
       container: 'mailinpercent', // container id
       style: 'mapbox://styles/lilylou/ckgv56oi74jgz19s0ah995qu4' // map style URL from Mapbox Studio
      });
        // make a pointer cursor
        mapdeadline.getCanvas().style.cursor = 'default';

        // set map bounds to the continental US
        // make a pointer cursor
        mapdeadline.getCanvas().style.cursor = 'default';

        var layers = [
          '40%',
          '50%',
          '60%',
          '70%',
          '80%'
        ];
        var colors = [
          '#ffffff',
          '#ebb2b2',
          '#e46262',
          '#d41616',
          '#990a0a'
        ];

        // create legend
        for (i = 0; i < layers.length; i++) {
          var layer = layers[i];
          var color = colors[i];
          var item = document.createElement('div');
          var key = document.createElement('span');
          key.className = 'legend-key';
          key.style.backgroundColor = color;

          var value = document.createElement('span');
          value.innerHTML = layer;
          item.appendChild(key);
          item.appendChild(value);
          legend3.appendChild(item);
        }

                // change info window on hover
                mapdeadline.on('mousemove', function(e) {
          var rejectionrate = mapdeadline.queryRenderedFeatures(e.point, {
            layers: ['mailinballot']
          });

          if (rejectionrate.length > 0) {
            document.getElementById('pd3').innerHTML =
              '<h3><strong>' +
                rejectionrate[0].properties.NAME +
              ' County </strong></h3><p><b>' +
                rejectionrate[0].properties.PercentByMail  +
              ' %</b> of ballots cast through mail (' +
                rejectionrate[0].properties.ByMail + 
              ' mail-in ballots)</p>';
          } else {
            document.getElementById('pd3').innerHTML =
            '<p>Hover over a county!</p><p>Data from <a href="https://www.eac.gov/research-and-data/datasets-codebooks-and-surveys">U.S. Election Assistance Commission</a> and the US Census Bureau.</p>';
          }
        });
        var ballotboxes = new mapboxgl.Map({
          container: 'ballotBoxesMap',
            style: 'mapbox://styles/lilylou/ckgvoe5xc17u919m9x7ywisnn',
            center: [-111.993129, 34.246049],
            zoom: 5.7
        });
        ballotboxes.on('click', 'ballotboxes', function (e) {
            new mapboxgl.Popup()
            .setLngLat(e.lngLat)
            .setHTML('<h3>' + e.features[0].properties.Name + "</h3>" + "<p>"+ e.features[0].properties.Description + "</p>")
            .addTo(ballotboxes);
        });

        ballotboxes.on('click', 'voting-locations', function (e) {
            new mapboxgl.Popup()
            .setLngLat(e.lngLat)
            .setHTML('<h3>'+e.features[0].properties._0 + " County: " + titleCase(e.features[0].properties.name) + "</h3>" + "<p>"+ titleCase(e.features[0].properties.address) + "</p>")
            .addTo(ballotboxes);
        });


        // Change the cursor to a pointer when the mouse is over the states layer.
            ballotboxes.on('mouseenter', 'ballotboxes', function () {
              ballotboxes.getCanvas().style.cursor = 'pointer';
            });
            
            // Change it back to a pointer when it leaves.
            ballotboxes.on('mouseleave', 'ballotboxes', function () {
            ballotboxes.getCanvas().style.cursor = '';
            });

                    // Change the cursor to a pointer when the mouse is over the states layer.
            ballotboxes.on('mouseenter', 'voting-locations', function () {
              ballotboxes.getCanvas().style.cursor = 'pointer';
            });
            
            // Change it back to a pointer when it leaves.
            ballotboxes.on('mouseleave', 'voting-locations', function () {
            ballotboxes.getCanvas().style.cursor = '';
            });


            ballotboxes.addControl(new mapboxgl.ScaleControl({position: 'top-right'}));

            var heatmap = new mapboxgl.Map({
                container: 'heatmap', // container id
                style: 'mapbox://styles/lilylou/ckgzzaq2r1jzf19oaomahnmtf', // map style URL from Mapbox Studio
                center: [-111.993129, 34.246049],
                zoom: 5.7

      });
      heatmap.addControl(new mapboxgl.ScaleControl({position: 'top-right'}));



      });
    </script>
  </body>
</html>
